{%  extends 'base.html'  %}
{% load static %}
{%  block header  %}
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <h1><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span> Polls <small>Open-Banking ChatBot Survey</small></h1>
        </div>
      </div>
    </div>

{%  endblock  %}

{%  block breadcrumb  %}
      <div class="container">
        <ol class="breadcrumb">
          <li><a href="{% url 'home:dashboard'  %}">Dashboard</a></li>
          <li class="active">Polls</li>
        </ol>
      </div>
{%  endblock  %}

{%  block main  %}

 <div class="panel panel-default">
    <div class="panel-heading main-color-bg">
      <h3 class="panel-title">Polls</h3>
    </div>
    <div class="panel-body">
      <div class="row">
        <div class="col-md-12">
            <a
            href="?text=True"
            class="btn btn-{% if 'text' in request.GET %}active{% else %}getBtn {% endif %}"
            style="margin-bottom: 5px">Title
        </a>
        <a
            href="?pub_date=True"
            class="btn btn-{% if 'pub_date' in request.GET %}active{% else %}getBtn {% endif %} "
            style="margin-bottom: 5px">Date-Published
        </a>
        <a
            href="?num_votes=True"
            class="btn btn-{% if 'num_votes' in request.GET %}active{% else %}getBtn {% endif %}"
            style="margin-bottom: 5px">Ratings
        </a> 

        </div>
        
            <div class="col-md-12">
                <input class="form-control" 
                       placeholder="Filter Polls..."
                       type="search"
                       aria-label="Search"
                       name='search'
                       value="{{search_term}}"
                 >
            </div>
      </div>
      <br>
      <table class="table table-striped table-hover">
        <tr>
          
            <th>Title</th>
            <th>Published</th>
            <th>Created</th>
            <th></th>
        </tr>
        <tr>
          {% for poll in polls %}
            <td>{{ poll }}</td>
            <td><span class="glyphicon glyphicon-ok" aria-hidden="true"></span></td>
            <td>{{  poll.pub_date }}</td>
            <td><a class="btn btn-info" href="{% url 'polls:detail' poll.id %}">View</a></td>
          {% endfor %}
        </tr>
        
      </table>
    </div>
  </div>
{% endblock %}